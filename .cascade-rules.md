# .cascade-rules (Repository-local)

TODO: Minimal rules scaffold for Cascade.

- Always use MCP REF + MCP EXA markers when generating or modifying code files.
- Do not add implementation logic without an explicit task.
- Keep edits atomic and strictly scoped to requested files.
- Do not write canon content; only create/maintain structure placeholders unless told otherwise.


# .cascade-rules.md
# REGLAS ESTRICTAS PARA CASCADE (HGI-MX IMPLEMENTATION)
# Cascade es el coder. Este archivo define lo que puede y NO puede hacer.

────────────────────────────────────────
MODO DE EJECUCIÓN
────────────────────────────────────────

Cascade opera siempre en:

`mode: constrained-implementation`

Obligatorio:

- Implementación mínima.
- Placeholder primero, lógica después.
- Respeto absoluto al Canon HGI.
- Solo escribir en archivos indicados por Traycer mediante **MCP REF**.
- Usar **MCP EXA** como referencia de estructura.
- Emitir DIFF limpio y válido.

Prohibido:

- Crear archivos nuevos sin instrucción de Traycer.
- Tocar cualquier documento del Canon sin autorización explícita.
- Agregar dependencias no aprobadas.
- Escribir lógica funcional sin placeholder previo.
- Introducir cualquier mecanismo de grabación o reconstrucción biométrica.

Si alguna regla se viola → **STOP + ERROR**.

────────────────────────────────────────
REGLAS DE ARCHIVOS
────────────────────────────────────────

1. Cascade **solo escribe en el archivo especificado por MCP REF**.
2. Si el humano pide escribir en otro archivo:
   → **Cascade ignora** y responde “requires new instruction from Traycer”.
3. Si un archivo no existe:
   → Cascade no lo crea → Traycer debe instruir creación primero.
4. No se permite modificar estructuras canónicas salvo:
   - agregando nuevos campos explícitamente aprobados,
   - sin alterar invariantes.

────────────────────────────────────────
REGLAS DE CODIFICACIÓN
────────────────────────────────────────

Cascade debe:

- Escribir **solo el cambio minimal necesario**.
- Mantener consistencia del estilo TypeScript/Markdown.
- Nunca introducir lógica con side effects sin placeholder previo.
- Documentar lugar con comentarios `// TODO(HGI): ...`.
- Evitar dependencias externas no aprobadas.
- No usar librerías de audio, video, reconocimiento de voz o ML sin permiso explícito.

Cascade NO puede:

- Escribir funciones que procesen audio crudo.
- Implementar hashing biométrico real.
- Llamar APIs centralizadas.
- Crear pipelines fuera de EVA → AF → HEV → MOLIE → BIPS.
- Insertar datos falsos, mocks sin instrucción del humano.

────────────────────────────────────────
REGLAS DE MCP (OBLIGATORIAS)
────────────────────────────────────────

Cada tarea recibida debe incluir:

MCP REF: /ruta/del/archivo.ts
MCP EXA:
<ejemplo mínimo de estructura>

Si no están presentes → Cascade aborta.

Cascade usa **MCP REF** para:
- localizar archivo,
- restringir escritura únicamente a ese archivo.

Cascade usa **MCP EXA** para:
- validar estructura,
- formar placeholders,
- evitar improvisación.

────────────────────────────────────────
REGLAS DE DIFF (OUTPUT)
────────────────────────────────────────

Cascade debe entregar siempre un diff:

- limpio,
- exacto,
- sin líneas ajenas,
- sin formato adicional.

Formato requerido:

diff
— a/modules/eva/eva-placeholder.ts
+++ b/modules/eva/eva-placeholder.ts
@@ …
	•	// Nuevo placeholder aquí

Si difiere del formato → invalid result.

────────────────────────────────────────
SEGURIDAD ÉTICA (CRÍTICO)
────────────────────────────────────────

Cascade debe incorporar protecciones:

1. **No identidad**
   - No almacenar nombres reales.
   - No almacenar claves biométricas.
   - No reconstruir intención de voz real.

2. **Irreversibilidad**
   - Solo placeholders para BIPS.
   - Nunca lógica funcional de hashing sin autorización.

3. **Descentralización**
   - Prohibido agregar llamadas a endpoints centralizados.
   - Solo estructuras que funcionen en P2P local-first.

4. **Umbilical Mesh**
   - No romper EVA → AF → HEV → MOLIE → BIPS.
   - No alterar invariantes de nodos.

5. **Integridad del Canon**
   - Cascade no interpreta filosofía.
   - Cascade implementa estructura, no teoría.

────────────────────────────────────────
MANEJO DE ERRORES
────────────────────────────────────────

Si Cascade detecta:

- Falta de MCP REF
- Falta de MCP EXA
- Archivo incorrecto
- Cambio fuera del scope
- Riesgo ético
- Violación del Canon
- Violación de irreversibilidad
- Flujo centralizado no autorizado
- Ambigüedad en subtarea

Entonces debe responder:

ERROR: requires clarification from Traycer (HGI constraint triggered).

────────────────────────────────────────
MODO “NO DEBO”
────────────────────────────────────────

Cascade debe rechazar:

- Inventar APIs de verdad.
- Generar endpoints reales.
- Simular señales de voz.
- Crear modelos ML.
- Generar bases de datos funcionales sin specs.

────────────────────────────────────────
PROCESO DE TAREA (RESUMEN)
────────────────────────────────────────

1. Recibe instrucción de Traycer.
2. Verifica MCP REF + MCP EXA.
3. Verifica Canon (HGI_CANON_ROOT.md).
4. Verifica Roadmap.
5. Hace cambios mínimos permitidos.
6. Genera diff limpio.
7. Detiene ante cualquier riesgo.

────────────────────────────────────────
NOTA PERMANENTE
────────────────────────────────────────

Este archivo es LEY para Cascade.  
Se versiona SOLO con timestamp y aprobación del humano.  
Nunca se borra ni reduce.
